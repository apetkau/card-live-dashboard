#!/bin/sh
# Runs CARD:Live dashboard via gunicorn
# This script used to keep track of standard options to gunicorn to run application.

card_live_home=$1
BIND_ADDRESS="0.0.0.0:8050"

if [ "${card_live_home}" = "" ]
then
  echo "Usage: `basename $0` [card_live_home]\n"
  echo "Run the CARD:Live Dashboard using the specified CARD:Live home directory (created with 'cardlive-dash-init')."
  echo "Will server the webserver on ${BIND_ADDRESS} by default."
else
  gunicorn --workers 2 -b ${BIND_ADDRESS} "card_live_dashboard.app:flask_app(card_live_home='${card_live_home}')" --timeout 600 --access-logfile ${card_live_home}/access.log --log-level debug
fi
